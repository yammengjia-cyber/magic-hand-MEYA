import React, { useMemo, useRef } from 'react';
import { Html, useTexture } from '@react-three/drei'; // ğŸŒŸ 1. å¼•å…¥ useTexture
import { useFrame } from '@react-three/fiber';
import * as THREE from 'three';

// ... (ä¸­é—´çš„ THEME, DATA, StarText, VolumetricBar, MixedColorSphere ç­‰ä»£ç ä¿æŒä¸å˜ï¼Œä¸è¦åŠ¨) ...
// ... (ç›´æ¥æ»šåŠ¨åˆ°æ–‡ä»¶æœ€ä¸‹æ–¹) ...

// === ğŸ–¼ï¸ å›¾ç‰‡è½¬ç²’å­ç»„ä»¶ (æ–°å¢) ===
export const ParticleImage = ({ url, scale = 1, position = [0, 0, 0] }) => {
  // åŠ è½½çº¹ç†
  const texture = useTexture(url);

  return (
    <points position={position}>
      {/* planeGeometry å‚æ•°è§£é‡Š: 
         [å®½, é«˜, å®½çš„åˆ†æ®µæ•°, é«˜çš„åˆ†æ®µæ•°] 
         åˆ†æ®µæ•°è¶Šé«˜ï¼Œç²’å­è¶Šå¯†é›†ï¼Œå›¾åƒè¶Šæ¸…æ™°ã€‚è¿™é‡Œè®¾ä¸º 80x25 
      */}
      <planeGeometry args={[scale * 3.5, scale, 80, 25]} />
      <pointsMaterial 
        size={0.04}            // ç²’å­å¤§å°
        map={texture}          // è´´å›¾
        transparent            // å…è®¸é€æ˜
        alphaTest={0.1}        // è¿‡æ»¤æ‰å®Œå…¨é€æ˜çš„åƒç´ 
        sizeAttenuation={true} // éšè·ç¦»è¿‘å¤§è¿œå°
        depthWrite={false}
        vertexColors={false}   // ä½¿ç”¨è´´å›¾åŸè‰²
        color="#ffffff"
      />
    </points>
  );
};

// === ğŸ•¸ï¸ è¿æ¥çº¿ç»„ä»¶ (ä¿æŒåœ¨æœ€å) ===
export const FineLinesNatural = ... (ä¿æŒä¸å˜)